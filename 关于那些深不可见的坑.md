# 关于那些深不可见的坑

### 不可见字符 '\u200B'

- `\u200b` 是Unicode中的“零宽度空间”，我在某公司面试题的时候首次遇到，被坑坏了，记忆深刻。

- `\u200b` 其在命令行输出、调试器中都看不见，但是占用一个字符长度。使用`char charAt(int index)` 可以捕获，见如下示例

```java
        String a = "\u200Bfrom";
        String b = "from";
        System.out.println(a);			// from
        System.out.println(b);			// from
        boolean bool = a.equals(b);
        System.out.println(bool);		// false
```

- 调试界面如下

<p align="center">
          <img src="https://raw.githubusercontent.com/TortoiseKnightB/Java_notes/main/images/关于那些深不可见的坑/01.png" width="1000"/>
  </p>

- a 为加上 `\u200b` 的字符串，b 为正常字符串。发现其在调试器中的显示一模一样，而`a.equals(b)` 却返回 `false`，要是以前没有遇见过很难发现这个坑
- 使用`a.charAt(0)` 捕获字符串 a 的首个字符，可以发现其结果并非`f`，而是看不见的`\u200B`
- `\u200b` 无法用`String trim()` 处理掉，得用 `a.replaceAll("\u200B", "")` 替换掉
- `\u200b` 的来源暂时没有弄清楚，只知道可能和前端有关，以后遇到这种坑能够想到它就行了

------

### leetcode 中测试通过，提交不过

- 同一个输入，在 leetcode 控制台中测试通过，在提交中却执行报错。参考 leetcode 的官方答案

<p align="center">
          <img src="https://raw.githubusercontent.com/TortoiseKnightB/Java_notes/main/images/关于那些深不可见的坑/02.png" width="500"/>
  </p>

- 即：如果编写语言为 **Java**，尽量不要使用 **static** 全局变量

------

### IDEA InputStream 读取文件为空

- 不要通过复制粘贴来创建文件，通过在文件夹下右键创建文件
- 或者尝试清空IDEA缓存

------

### 自定义异常类

- 自定义业务异常类通常继承 `RuntimeException`，并且有成员变量 `errorCode`、`message`
- 在自定义异常里面，在有参的构造方法中会有这么一句 `super(message);`，给父类的`message` 赋值，因为父类的 `message` 本身没有值

------

### SpringBoot的多模块项目引入其他模块时@Autowired无法注入其他模块的Bean

- https://blog.csdn.net/qq_15329947/article/details/89149847

1. 添加依赖

```java
<dependency>
    <groupId>com.example</groupId>
    <artifactId>module-b</artifactId>
    <version>1.0</version>
</dependency>
```

2. 在模块A的SpringBootApplication扩大其扫描包的范围：

```java
@SpringBootApplication(scanBasePackages = {"com.example"})
// 或
@SpringBootApplication(scanBasePackages = {"com.example.modulea", "com.example.moduleb"})
```

------

### Springboot 多模块集成mybatis提示：Invalid bound statement (not found)

- https://blog.csdn.net/zhouzhiwengang/article/details/88016879

- 修改 application.yml 中的配置，由

```java
mybatis:
    type-aliases-package: com.zzg.author.model.domain;com.zzg.quartz.domain
    mapper-locations: classpath:/mybatis/*.xml
```

- 改为（classpath 后面加上 *）

```java
mybatis:
    type-aliases-package: com.zzg.author.model.domain;com.zzg.quartz.domain
    mapper-locations: classpath*:/mybatis/*.xml
```

- mybatis.mapper-locations 配置多个mapper路径
- 项目A，mapper.xml 路径在 resources/mappers/push 下面
- 项目B，mapper.xml 路径再 resources/mappers/下面
- 项目A引用了项目B，把项目B的jar包加入到pom文件中了
- 那么项目A的application.properties配置文件中配置mapper.xml路径如下：

- `mybatis.mapper-locations=classpath:mappers/push/*.xml,classpath*:/mappers/*.xml`
  
- 注意点：在classpath后面的 * 必不可少，缺少型号的话后面的通配符不起作用
- \*\*表示可以表示任意多级目录
- 在 IDEA 中生成文件夹时，一个一个创建，不要写“mybatis.mapper”，这样会造成路径错误（classpath:mybatis/mapper 与 classpath:mybatis.mapper 不一样）
- 注意 IDEA 中文件夹与包的区别

------

### 使用IDEA无法下载源码

- https://www.jianshu.com/p/a259e322794c
- 打开IDEA命令行区域，进入pom.xml所在文件夹，执行命令 `mvn dependency:resolve -Dclassifier=sources`

